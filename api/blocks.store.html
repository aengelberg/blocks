<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>blocks.store documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Blocks</span> <span class="project-version">0.8.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blocks</span></div></div></li><li class="depth-2 branch"><a href="blocks.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="blocks.data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-2 current"><a href="blocks.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li><li class="depth-3 branch"><a href="blocks.store.buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>buffer</span></div></a></li><li class="depth-3 branch"><a href="blocks.store.cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cache</span></div></a></li><li class="depth-3 branch"><a href="blocks.store.file.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>file</span></div></a></li><li class="depth-3 branch"><a href="blocks.store.memory.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>memory</span></div></a></li><li class="depth-3 branch"><a href="blocks.store.replica.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>replica</span></div></a></li><li class="depth-3"><a href="blocks.store.tests.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tests</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="blocks.store.html#var-BatchingStore"><div class="inner"><span>BatchingStore</span></div></a></li><li class="depth-2 branch"><a href="blocks.store.html#var--delete-batch.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-delete-batch!</span></div></a></li><li class="depth-2 branch"><a href="blocks.store.html#var--get-batch"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-get-batch</span></div></a></li><li class="depth-2"><a href="blocks.store.html#var--put-batch.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-put-batch!</span></div></a></li><li class="depth-1"><a href="blocks.store.html#var-BlockEnumerator"><div class="inner"><span>BlockEnumerator</span></div></a></li><li class="depth-2"><a href="blocks.store.html#var-enumerate"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>enumerate</span></div></a></li><li class="depth-1"><a href="blocks.store.html#var-BlockStore"><div class="inner"><span>BlockStore</span></div></a></li><li class="depth-2 branch"><a href="blocks.store.html#var--delete.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-delete!</span></div></a></li><li class="depth-2 branch"><a href="blocks.store.html#var--get"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-get</span></div></a></li><li class="depth-2 branch"><a href="blocks.store.html#var--list"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-list</span></div></a></li><li class="depth-2 branch"><a href="blocks.store.html#var--put.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-put!</span></div></a></li><li class="depth-2"><a href="blocks.store.html#var--stat"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-stat</span></div></a></li><li class="depth-1"><a href="blocks.store.html#var-initialize"><div class="inner"><span>initialize</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">blocks.store</h1><div class="doc"><div class="markdown"><p>Block storage protocols. Typically, clients of the library should use the API wrapper functions in <code>blocks.core</code> instead of using these methods directly.</p></div></div><div class="public anchor" id="var-BatchingStore"><h3>BatchingStore</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Protocol for stores which can perform optimized batch operations on blocks. Note that none of the methods in this protocol guarantee an ordering on the returned collections.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--delete-batch.21"><h3>-delete-batch!</h3><div class="usage"><code>(-delete-batch! store ids)</code></div><div class="doc"><div class="markdown"><p>Removes multiple blocks from the store, identified by a collection of multihashes. Returns a collection of multihashes for the deleted blocks.</p></div></div></div><div class="public anchor" id="var--get-batch"><h3>-get-batch</h3><div class="usage"><code>(-get-batch store ids)</code></div><div class="doc"><div class="markdown"><p>Retrieves a batch of blocks identified by a collection of multihashes. Returns a sequence of the requested blocks which are found in the store.</p></div></div></div><div class="public anchor" id="var--put-batch.21"><h3>-put-batch!</h3><div class="usage"><code>(-put-batch! store blocks)</code></div><div class="doc"><div class="markdown"><p>Saves a collection of blocks to the store. Returns a collection of the stored blocks.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/greglook/blocks/blob/master/src/blocks/store.clj#L42">view source</a></div></div><div class="public anchor" id="var-BlockEnumerator"><h3>BlockEnumerator</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>An enumerator provides a way to efficiently iterate over all the stored blocks.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-enumerate"><h3>enumerate</h3><div class="usage"><code>(enumerate store)</code></div><div class="doc"><div class="markdown"><p>Returns a lazy sequence of stored blocks. Blocks are expliticly <strong>not</strong> returned in any defined order; it is assumed that the store will enumerate them in the most efficient order available.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/greglook/blocks/blob/master/src/blocks/store.clj#L63">view source</a></div></div><div class="public anchor" id="var-BlockStore"><h3>BlockStore</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Protocol for content-addressable storage keyed by multihash identifiers.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--delete.21"><h3>-delete!</h3><div class="usage"><code>(-delete! store id)</code></div><div class="doc"><div class="markdown"><p>Removes a block from the store. Returns true if the block was stored.</p></div></div></div><div class="public anchor" id="var--get"><h3>-get</h3><div class="usage"><code>(-get store id)</code></div><div class="doc"><div class="markdown"><p>Returns the identified block if it is stored, otherwise nil. The block should include stat metadata. Typically clients should use <code>get</code> instead, which validates arguments and the returned block record.</p></div></div></div><div class="public anchor" id="var--list"><h3>-list</h3><div class="usage"><code>(-list store opts)</code></div><div class="doc"><div class="markdown"><p>Lists the blocks contained in the store. Returns a lazy sequence of stat metadata about each block. The stats should be returned in order sorted by multihash id. See <code>list</code> for the supported options.</p></div></div></div><div class="public anchor" id="var--put.21"><h3>-put!</h3><div class="usage"><code>(-put! store block)</code></div><div class="doc"><div class="markdown"><p>Saves a block into the store. Returns the block record, updated with stat metadata.</p></div></div></div><div class="public anchor" id="var--stat"><h3>-stat</h3><div class="usage"><code>(-stat store id)</code></div><div class="doc"><div class="markdown"><p>Returns a map with an <code>:id</code> and <code>:size</code> but no content. The returned map may contain additional data like the date stored. Returns nil if the store does not contain the identified block.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/greglook/blocks/blob/master/src/blocks/store.clj#L11">view source</a></div></div><div class="public anchor" id="var-initialize"><h3>initialize</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Constructs a new block store from a URI by dispatching on the scheme. The store will be returned in an initialized but not started state.</p></div></div><div class="src-link"><a href="https://github.com/greglook/blocks/blob/master/src/blocks/store.clj#L77">view source</a></div></div></div></body></html>